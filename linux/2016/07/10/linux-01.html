<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="hello,every body!"><title>linux系列(一)-linux下的mysql定时备份-nfs异地存储 | troyCoder</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">linux系列(一)-linux下的mysql定时备份-nfs异地存储</h1><a id="logo" href="/.">troyCoder</a><p class="description">爱生活爱编程，分享学习工作中的知识和见解！</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/history/"><i class="fa fa-history"> 历史</i></a><a href="/guestbook/"><i class="fa fa-comments"> 留言</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">linux系列(一)-linux下的mysql定时备份-nfs异地存储</h1><div class="post-meta">Jul 10, 2016<span> | </span><span class="category"><a href="/categories/linux/">linux</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="linux/2016/07/10/linux-01.html" href="/linux/2016/07/10/linux-01.html#comments" class="ds-thread-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#正文"><span class="toc-number">2.</span> <span class="toc-text">正文</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#首先nfs网络文件系统搭建："><span class="toc-number">2.1.</span> <span class="toc-text">首先nfs网络文件系统搭建：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#一、环境介绍："><span class="toc-number">2.1.1.</span> <span class="toc-text">一、环境介绍：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#二、服务器端配置（192-168-159-71）："><span class="toc-number">2.1.2.</span> <span class="toc-text">二、服务器端配置（192.168.159.71）：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#三、客户端挂载（192-168-159-72、192-168-159-73）："><span class="toc-number">2.1.3.</span> <span class="toc-text">三、客户端挂载（192.168.159.72、192.168.159.73）：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#四、NFS加到启动项，让开机自动mount"><span class="toc-number">2.1.4.</span> <span class="toc-text">四、NFS加到启动项，让开机自动mount</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对Mysql进行定时备份"><span class="toc-number">2.2.</span> <span class="toc-text">对Mysql进行定时备份</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#利用linux的定时器crontab对mysql进行定时备份"><span class="toc-number">2.2.1.</span> <span class="toc-text">利用linux的定时器crontab对mysql进行定时备份</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mysql定时删除上月备份"><span class="toc-number">2.3.</span> <span class="toc-text">Mysql定时删除上月备份</span></a></li></ol></li></ol></div></div><div class="post-content"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>最近一直忙着工作方面的事，没时间来总结和更新博客，本来想法是想一周，至少两篇关于技术方面的博文，原来一起想写java方面的文章，一直没有总结好。后面的文章，都是有经过自己新手实践过。希望能和大家一起坚持下来。</p>
<h3 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h3><p>基于docker容器的mysql定时备份-nfs异地存储，正好是最近工作中实践过，所以拿来分享一下，</p>
<h4 id="首先nfs网络文件系统搭建："><a href="#首先nfs网络文件系统搭建：" class="headerlink" title="首先nfs网络文件系统搭建："></a>首先nfs网络文件系统搭建：</h4><p><strong>安装：</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install nfs-utils rpcbind</div></pre></td></tr></table></figure></p>
<p>一般系统安装后，都会安装这个必备的软件的，设置开机启动:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@master-zookeeper ~]<span class="comment">#systemctl enable nfs 或者 systemctl enable nfs-server.service</span></div><div class="line">[root@master-zookeeper ~]<span class="comment">#systemctl enable rpcbind</span></div></pre></td></tr></table></figure></p>
<h5 id="一、环境介绍："><a href="#一、环境介绍：" class="headerlink" title="一、环境介绍："></a>一、环境介绍：</h5><ul>
<li>三台台Vmware虚拟机(网络模式为nat)：<br>服务器：(service)192.168.159.71(centos7)<br>客户端：(client1)192.168.159.72(centos7)<br>客户端：(client2)192.168.159.73(centos7)</li>
<li>升级这三台（192.168.159.71/72/73）主机的内核到最新版本。为安装最新的docker版本<br>升级内核(在连网的环境下)<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost bin]<span class="comment"># rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span></div><div class="line">[root@localhost bin]<span class="comment"># rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span></div><div class="line">[root@localhost bin]<span class="comment"># yum --enablerepo=elrepo-kernel install kernel-ml</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>也可以通过此<a href="http://pkgs.org/download/kernel-devel网站手工下载安装" target="_blank" rel="external">http://pkgs.org/download/kernel-devel网站手工下载安装</a><br>重要：目前内核还是默认的版本，如果在这一步完成后你就直接reboot了，重启后使用的内核版本还是默认的3.10，不会使用新的4.3，想修改启动的顺序，需要进行下一步</p>
<ul>
<li>查看默认启动顺序<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost bin]<span class="comment"># awk -F\' '$1=="menuentry " &#123;print $2&#125;' /etc/grub2.cfg</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>默认启动的顺序是从0开始，但我们新内核是从头插入（目前位置在0，而3.10的是在1），所以需要选择0，如果想生效最新的内核，需要<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost bin]<span class="comment"># grub2-set-default 0   我这里是1</span></div></pre></td></tr></table></figure></p>
<h5 id="二、服务器端配置（192-168-159-71）："><a href="#二、服务器端配置（192-168-159-71）：" class="headerlink" title="二、服务器端配置（192.168.159.71）："></a>二、服务器端配置（192.168.159.71）：</h5><ul>
<li><p>创建共享目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@master-zookeeper ~]<span class="comment"># mkdir –p /nfs-data/dmp/db-bak/ /nfs-data/dmp/data/ /nfs-data/dmp/frequency/</span></div></pre></td></tr></table></figure>
</li>
<li><p>NFS文件配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@master-zookeeper ~]<span class="comment"># vim /etc/exports</span></div><div class="line">/nfs-data/dmp/db-bak/ 192.168.159.*(rw,no_root_squash,sync,no_subtree_check)</div><div class="line">/nfs-data/dmp/data/ 192.168.159.*(rw,no_root_squash,sync,no_subtree_check)</div><div class="line">/nfs-data/dmp/frequency/ 192.168.159.*(rw,no_root_squash,sync,no_subtree_check)</div><div class="line">:wq(保存)</div></pre></td></tr></table></figure>
</li>
<li><p>使配置生效：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@master-zookeeper ~]<span class="comment"># exportfs -r</span></div></pre></td></tr></table></figure>
</li>
<li><p>启动:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@master-zookeeper ~]<span class="comment"># systemctl start rpcbind</span></div><div class="line">[root@master-zookeeper ~]<span class="comment"># systemctl start nfs-server.service</span></div><div class="line">如果已经启动则重启：</div><div class="line">[root@master-zookeeper ~]<span class="comment"># systemctl restart rpcbind</span></div><div class="line">[root@master-zookeeper ~]<span class="comment"># systemctl restart nfs-server.service</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="三、客户端挂载（192-168-159-72、192-168-159-73）："><a href="#三、客户端挂载（192-168-159-72、192-168-159-73）：" class="headerlink" title="三、客户端挂载（192.168.159.72、192.168.159.73）："></a>三、客户端挂载（192.168.159.72、192.168.159.73）：</h5><ul>
<li><p>创建需要挂载的目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># mkdir –p /nfs-data/dmp/db-bak/ /nfs-data/dmp/data/ /nfs-data/dmp/frequency/</span></div></pre></td></tr></table></figure>
</li>
<li><p>测试挂载（两台客户端上执行以下命令）： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@node02 ~]<span class="comment"># showmount -e 192.168.159.71</span></div><div class="line">Export list <span class="keyword">for</span> 192.168.159.71:</div><div class="line">/nfs-data/dmp/frequency 192.168.159.*</div><div class="line">/nfs-data/dmp/data      192.168.159.*</div><div class="line">/nfs-data/dmp/db-bak    192.168.159.*</div></pre></td></tr></table></figure>
</li>
<li><p>挂载服务器上的三个目录：<br>客户端在挂载的时候遇到的一个问题如下，可能是网络不太稳定，NFS默认是用UDP协议，换成TCP协议即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@node02 ~]<span class="comment">#  mount -t nfs 192.168.159.71:/nfs-data/dmp/db-bak /nfs-data/dmp/db-bak -o proto=tcp -o nolock</span></div><div class="line">[root@node02 ~]<span class="comment"># mount -t nfs 192.168.159.71:/nfs-data/dmp/data /nfs-data/dmp/data -o proto=tcp -o nolock</span></div><div class="line">[root@node02 ~]<span class="comment"># mount -t nfs 192.168.159.71:/nfs-data/dmp/frequency /nfs-data/dmp/frequency -o proto=tcp -o nolock</span></div><div class="line">[root@node02 ~]<span class="comment"># mount</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>两台客户端执行完以上命令后，在159.72上看挂载情况：<br>如果信息如上显示则应该是挂载成功!</p>
<h5 id="四、NFS加到启动项，让开机自动mount"><a href="#四、NFS加到启动项，让开机自动mount" class="headerlink" title="四、NFS加到启动项，让开机自动mount"></a>四、NFS加到启动项，让开机自动mount</h5><p>在两台客户端（192.168.159.72、192.168.159.73）上执行以下操作：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[root@node02 ~]<span class="comment"># vim /etc/fstab</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># /etc/fstab</span></div><div class="line"><span class="comment"># Created by anaconda on Fri Mar  4 23:01:47 2016</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Accessible filesystems, by reference, are maintained under '/dev/disk'</span></div><div class="line"><span class="comment"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span></div><div class="line"><span class="comment">#</span></div><div class="line">/dev/mapper/centos-root /                       xfs     defaults        0 0</div><div class="line">UUID=c1781921-85a8-4237-875c-8e4ebecf0e14 /boot                   xfs     defaults        0 0</div><div class="line">/dev/mapper/centos-home /home                   xfs     defaults        0 0</div><div class="line">/dev/mapper/centos-swap swap                    swap    defaults        0 0</div><div class="line">/dev/sda4 /nfs-data xfs nosuid,nodev,nofail,x-gvfs-show 0 0</div><div class="line">192.168.159.71:/nfs-data/dmp/db-bak/ /nfs-data/dmp/db-bak/ nfs auto,noatime,nolock,<span class="built_in">bg</span>,nfsvers=4,intr,tcp,actimeo=1800 0 0</div><div class="line">192.168.159.71:/nfs-data/dmp/data/ /nfs-data/dmp/data/ nfs auto,noatime,nolock,<span class="built_in">bg</span>,nfsvers=4,intr,tcp,actimeo=1800 0 0</div><div class="line">192.168.159.71:/nfs-data/dmp/frequency/ /nfs-data/dmp/frequency/ nfs auto,noatime,nolock,<span class="built_in">bg</span>,nfsvers=4,intr,tcp,actimeo=1800 0 0</div><div class="line">:wq(保存)</div></pre></td></tr></table></figure></p>
<p>上述的fstab中的配置：<br><strong>192.168.159.71:/nfs-data/dmp/db-bak/ /nfs-data/dmp/db-bak/ nfs auto,noatime,nolock,bg,nfsvers=4,intr,tcp,actimeo=1800 0 0</strong><br>的含义是：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>含意  </th>
</tr>
</thead>
<tbody>
<tr>
<td>192.168.159.71:/nfs-data/dmp/db-bak/</td>
<td>是目标NFS服务器的IP（或域名）和NFS共享的路径</td>
</tr>
<tr>
<td>/nfs-data/dmp/db-bak/</td>
<td>是NFS客户端要mount挂载的路径（一般挂载到/mnt下面某个路径，此处只是测试，就随便挂了）</td>
</tr>
<tr>
<td>nfs</td>
<td>表示挂载的文件系统类型时NFS </td>
</tr>
<tr>
<td>auto</td>
<td>自动挂载；</td>
</tr>
<tr>
<td>noatime</td>
<td>不要添加access time==上次访问文件时间</td>
</tr>
<tr>
<td>nolock</td>
<td>禁止文件加锁。有时候访问旧的NFS服务器需要此参数。</td>
</tr>
<tr>
<td>bg</td>
<td>挂载作为后台服务去运行，如果第一次挂载失败了。默认是off的。</td>
</tr>
<tr>
<td>nfsvers=4</td>
<td>指定NFS协议的版本。</td>
</tr>
<tr>
<td>intr</td>
<td>允许NFS请求被中断，如果服务器挂了或连不上</td>
</tr>
<tr>
<td>tcp</td>
<td>指定NFS（不适用默认的UDP而改用）TCP</td>
</tr>
<tr>
<td>actimeo=1800</td>
<td>acregmin==acregmax==acdirmin====acdirmax，都设置为1800s=30分钟，即文件缓存时间为30分钟</td>
</tr>
<tr>
<td>0</td>
<td>不需要NFS的CacheFS</td>
</tr>
<tr>
<td>0</td>
<td>不需要NFS的CacheFS</td>
</tr>
</tbody>
</table>
<p>本次测试通过以上测试，重启后，可以自动挂载</p>
<h4 id="对Mysql进行定时备份"><a href="#对Mysql进行定时备份" class="headerlink" title="对Mysql进行定时备份"></a>对Mysql进行定时备份</h4><h5 id="利用linux的定时器crontab对mysql进行定时备份"><a href="#利用linux的定时器crontab对mysql进行定时备份" class="headerlink" title="利用linux的定时器crontab对mysql进行定时备份"></a>利用linux的定时器crontab对mysql进行定时备份</h5><ul>
<li>crontab -e 是新建或者修改 -l是查看定时器<br> 通过NFS创建一个db-bak文件，做为异地备份传输（可存储在71、72、73这三台机器的/nfs-data/dmp/db-bak）。具体怎么操作，参考上面nfs网络文件系统搭建章节</li>
<li><p>在db-bak文件下创建一下备份的shell脚本，内容如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@node2 frequency]<span class="comment"># cat backupDmp.sh </span></div><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment">#按时间生成变量strName作为文件名</span></div><div class="line">strName=`date +%Y-%m-%d-%H-%M-%S`</div><div class="line"><span class="comment">#在运行在docker环境的mysql中执行备份命令 </span></div><div class="line">docker <span class="built_in">exec</span> dmpmysql mysqldump -u root -p123456 device&gt;/nfs-data/dmp/db-bak/<span class="variable">$strName</span>-device.sql</div><div class="line">[root@node2 frequency]<span class="comment"># chmod +x backupDmp.sh  (修改执行权限)</span></div></pre></td></tr></table></figure>
</li>
<li><p>在执行以上脚本前，需要mysql容器把/nfs-data/dmp/db-bak/挂到到容器里。所以如果是已经启动的容器，请重新挂载该目录。(参考docker容器挂载目录)</p>
</li>
<li>加入到linux的crontab任务调度中<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@node2 frequency]<span class="comment"># crontab -e</span></div><div class="line"><span class="comment">#每隔两天，在2.30分钟执行一次</span></div><div class="line">30 2 */2 * * /nfs-data/dmp/db-bak/backupDmp.sh</div><div class="line"><span class="comment">#每三分钟执行一次</span></div><div class="line"><span class="comment">#*/3 * * * * /nfs-data/dmp/db-bak/backupDmp.sh</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>执行以上步骤后，数据备份会每隔两自动备份，并通过NFS异地备份到别的机器上</p>
<h4 id="Mysql定时删除上月备份"><a href="#Mysql定时删除上月备份" class="headerlink" title="Mysql定时删除上月备份"></a>Mysql定时删除上月备份</h4><ul>
<li><p>在db-bak文件下创建一下备份的shell脚本，内容如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@node2 frequency]<span class="comment"># vim backupDeleteDmp-Input.sh </span></div><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment">#获取当前时间的上一个月的月份数据为daleteTime作为文件名</span></div><div class="line">deleteTime=`date <span class="_">-d</span> <span class="string">"last month"</span> +%Y-%m`</div><div class="line"><span class="comment">#执行删除上月备份的数据</span></div><div class="line">rm -rf <span class="variable">$deleteTime</span>*.sql</div><div class="line">[root@node2 frequency]<span class="comment"># chmod +x backupDeleteDmp-Input.sh  (修改执行权限)</span></div></pre></td></tr></table></figure>
</li>
<li><p>加入到linux的crontab任务调度中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@node2 frequency]<span class="comment"># crontab -e</span></div><div class="line"><span class="comment">#每隔月16号，在2.30分钟执行删除上月备份数据</span></div><div class="line">30 2 16 * * /nfs-data/dmp/db-bak/backupDeleteDmp-Input.sh</div></pre></td></tr></table></figure>
</li>
</ul>
<p>执行以上步骤后，数据备份会每个月16号会自动删除上月的备份，并通过NFS异地删除别的机器上的备份</p>
<hr>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://www.troylc.cc/linux/2016/07/10/linux-01.html" data-id="cj059w6om001nlsqyto7sgi6v" class="article-share-link">分享到</a><div class="tags"><a href="/tags/linux/">linux</a><a href="/tags/docker/">docker</a><a href="/tags/mysql/">mysql</a></div><div class="post-nav"><a href="/docker/2016/07/17/docker-01.html" class="pre">docker系列(一)docker基础命令与dockerfile文件创建镜像</a><a href="/hexo/2016/06/29/Hexo-7.html" class="next">Hexo教程(七)-hexo-利用git多PC间同步博客</a></div><div data-thread-key="linux/2016/07/10/linux-01.html" data-title="linux系列(一)-linux下的mysql定时备份-nfs异地存储" data-url="http://www.troylc.cc/linux/2016/07/10/linux-01.html" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="linux/2016/07/10/linux-01.html" data-title="linux系列(一)-linux下的mysql定时备份-nfs异地存储" data-url="http://www.troylc.cc/linux/2016/07/10/linux-01.html" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker-compose/">docker-compose</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring-cloud/">spring cloud</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/experience/">心得</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/hexo优化/" style="font-size: 15px;">hexo优化</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/jenkins/" style="font-size: 15px;">jenkins</a> <a href="/tags/registry/" style="font-size: 15px;">registry</a> <a href="/tags/swarm/" style="font-size: 15px;">swarm</a> <a href="/tags/docker-compose/" style="font-size: 15px;">docker-compose</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/心得/" style="font-size: 15px;">心得</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/jacman/" style="font-size: 15px;">jacman</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/Thread/" style="font-size: 15px;">Thread</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/spring-boot/" style="font-size: 15px;">spring-boot</a> <a href="/tags/spring-cloud/" style="font-size: 15px;">spring cloud</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/spring-cloud/2017/04/24/spring-cloud-deploy.html">用docker构建与部署spring-cloud的微服务(七)</a></li><li class="post-list-item"><a class="post-list-link" href="/spring-cloud/2017/04/16/spirng-cloud-config.html">SpringCloud构微服务之-配置中心(六)</a></li><li class="post-list-item"><a class="post-list-link" href="/spring-cloud/2017/04/13/spirng-cloud-sidecar.html">SpringCloud构建异构平台的微服务之-sidecar(五)</a></li><li class="post-list-item"><a class="post-list-link" href="/spring-cloud/2017/03/19/spirng-cloud-apigateway.html">SpringCloud和docker之微服务-apigateway(四)</a></li><li class="post-list-item"><a class="post-list-link" href="/spring-cloud/2017/03/11/spirng-cloud-productservice.html">SpringCloud和docker之微服务-consumer(三)</a></li><li class="post-list-item"><a class="post-list-link" href="/spring-cloud/2017/03/09/spirng-cloud-userservice.html">SpringCloud和docker之微服务-provider(二)</a></li><li class="post-list-item"><a class="post-list-link" href="/spring-cloud/2017/03/01/spirng-cloud-eureka.html">SpringCloud和docker之微服务-eureka(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/docker-compose/2017/02/25/Docker08docker-compose01.html">docker-compose部署swarm服务(docker1.13.1)</a></li><li class="post-list-item"><a class="post-list-link" href="/docker/2017/02/19/Docker07docker-swarm02.html">docker1.12.3 docker-swarm集群服务部署与维护（二）</a></li><li class="post-list-item"><a class="post-list-link" href="/java/2017/02/15/java01-thread-tools.html">java中并发工具包-同步器（一）</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://www.haomwei.com" title="屠夫9441的博客" target="_blank">屠夫9441的博客</a><ul></ul><a href="http://www.troylc.cc/" title="troylc博客" target="_blank">troylc博客</a></div><div class="widget"><div class="widget-title"><i class="fa fa-bar-chart"> 网站访问量</i></div><ul> </ul><a href="http://s05.flagcounter.com/more/IVe"><img src="http://s05.flagcounter.com/countxl/IVe/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/percent_0/" alt="" border="0" /></a></div><div class="widget"><div class="widget-title"><i class="fa fa-weibo"> 我的微博</i></div><ul> </ul><iframe width="100%" height="120 class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=199&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=2705524937&verifier=0f81d6c8&dpc=1"></iframe></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">troyCoder.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'troylc'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?b991924b21cd080f0a0e761ff1a69288";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>